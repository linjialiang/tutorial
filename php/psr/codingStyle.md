---
title: 编码风格
titleTemplate: PSR 教程
---

# 编码风格

与编码风格相关并已经通过的提案有 3 个：

-   PSR-1: 基本编码标准
-   PSR-12: 扩展编码风格指南
-   PER: 编码风格

## 一、编码风格概览

### PSR-1: 基本编码标准

1. PHP 代码文件 `必须` 以 `<?php` 或 `<?=` 标签开始；
2. PHP 代码文件 `必须` 以 `不带 BOM 的 UTF-8` 编码；
3. PHP 代码文件 `应该` 只做 1 件事：声明 `任意1种标志` 或引起 `副作用`；

    - 什么是 `标志`，如：类、函数、常量等。
    - 什么是 `副作用`，如：

        1. 生成输出
        2. 显式使用 `require` 或 `include`
        3. 连接到外部服务
        4. 修改 ini 设置
        5. 发出错误或异常
        6. 修改全局或静态变量
        7. 从文件中阅读或写入文件
        8. 还有其他...

        ```php [副作用]
        // 「副作用」：修改 ini 配置
        ini_set('error_reporting', E_ALL);

        // 「副作用」：引入文件
        include "file.php";

        // 「副作用」：生成输出
        echo "<html>\n";
        ```

4. 命名空间以及类 `必须` 符合 `PSR` 的自动加载规范；

    - `PSR-0` 已废弃，当下是遵循 [PSR-4](./psr-4)

5. 类的命名 `必须` 遵循大写开头的驼峰命名规范；

    - 如：`User`、`StudlyCaps`

6. 类的常量 `必须` 使用下划线分隔符来声明；

    - 单个字母：`VERSION`
    - 多个字母：`DATE_APPROVED`

    ::: warning
    `PSR-1` 没有要求类常量使用大写字母，但是业界普遍使用 `全大写+下划线` 来声明类常量
    :::

7. 方法名称 `必须` 遵循小写开头的驼峰命名规范。

    - 如：`pay`、`camelCase`

    ::: tip
    `方法` 是指类里面的 `function`
    :::

8. 属性 `可以` 遵循下面 3 种方式中的任意 1 种：

    - 大写开头的驼峰式: `$user`、`$StudlyCaps`
    - 小写开头的驼峰式: `$user`、`$camelCase`
    - 下划线分隔式: `$user`、`$camel_case`

    ::: tip

    1. `属性` 是指类里面所有 `$` 开头的变量，包括：

        | 属性范围       |
        | -------------- |
        | 类自身属性     |
        | 类方法里的变量 |

    2. `PSR-1` 规范要求 `属性` 在合理范围内保持统一风格，具体如下：

        | 合理范围 | 说明                               |
        | -------- | ---------------------------------- |
        | 整个团队 | 如：`psr` 团队写的所有 composer 包 |
        | 整个包   | 单个 composer 包                   |
        | 整个类   | 单个 `class/trait/interface/enum`  |
        | 整个方法 | 同个方法 `必须` 保持统一风格       |

    :::

### PSR-12: 扩展编码风格指南

### PER: 编码风格
