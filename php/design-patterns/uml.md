---
title: UML 类图
titleTemplate: PHP 设计模式教程
---

# {{ $frontmatter.title }}

学习设计模式前，最好先掌握 UML 类图

在 UML 的静态机制中类图是一个重点，它不但是设计人员关心的核心，更是实现人员关注的核心。建模工具也主要根据类图来产生代码。类图在 UML 的 9 个图中占据了一个相当重要的地位。

::: info 学习类图要掌握哪些内容？
类图是一个静态视图，它的核心包括 `类的表示` 以及 `类之间的关系表示`
:::

## 类的基本表示

这里的类是 `类`、`接口`、`包`、`特征` 的通常

::: details 类的基本表示法是三层矩形框

| 层级   | 内容          |
| ------ | ------------- |
| 第一层 | 类名          |
| 第二层 | 属性名/字段名 |
| 第三层 | 方法名        |

![人类](/assets/php/design-patterns/uml/01.png)

:::

::: details 访问控制

属性和方法前面的符号代表它们的访问控制（可见性）

| 符号 | 访问控制  |
| ---- | --------- |
| +    | public    |
| -    | private   |
| #    | protected |

:::

1. 属性定义的格式：[可视性]属性名[：属性类型]，其中[]内为可选内容；

2. 方法定义的格式：[可视性]操作名[(参数列表)][：返回类型][{特性}]

::: details 3. 关键表示的意义：

- `+` 表示 public
- `-` 表示 private
- `#` 表示 protected
- `~` 表示 default，也就是包权限
- `_` 下划线表示 static
- `斜体` 表示 abstract

:::

## 类之间的关系

## 类图说明

::: info 是否抽象：

1. 类名为斜体则为抽象类
2. 类方法为斜体则为抽象方法

:::

::: info 矩形 3 层：

1. 顶层：类名称
2. 中间层：类属性
3. 底层：类方法

:::

::: info 属性/方法访问控制：

| 符号 | 说明                |
| ---- | ------------------- |
| `-`  | 表示私有(private)   |
| `#`  | 表示保护(protected) |
| `+`  | 表示公开(public)    |

:::

## 依赖关系

使用 `虚线+箭头` 表示依赖关系

::: details `动物` 依赖 `氧气和水` 才能生存
![依赖关系](/assets/php/design-patterns/uml/02.jpg)

::: tip 什么是箭头？
箭头就是大于号 `->` ，它不是三角箭头
:::

## 继承关系

使用 `实线+空心三角箭头` 表示继承关系

::: details `鸟` 继承 `动物` 的特征
![继承关系](/assets/php/design-patterns/uml/03.webp)
:::

## 实现关系

使用 `虚线+空心三角形箭头` 表示实现关系

::: details 不同鸟类飞翔的能力是不一样的，`大雁` 实现了长时间在高空 `飞翔`
![实现关系](/assets/php/design-patterns/uml/04.jpg)
:::

## 关联关系

使用 `实线+箭头` 表示关联关系

当一个类需要知道另一个类时，可以用关联

::: details `企鹅` 的生存环境需要 `气候` 保持正常
如果气候持续回暖，冰川融化，就没有企鹅的生存环境了
![实现关系](/assets/php/design-patterns/uml/05.png)
:::

::: details `农作物` 的成熟和 `天气` 有关系
![实现关系2](/assets/php/design-patterns/uml/06.png)
:::

## 组合关系

组合是一种强的拥有关系，是一种 contains-a 的关系，体现了严格的部分和整体关系，部分和整体的生命周期一样。

使用 `实心菱形+实线+箭头` 表示，还可以使用连线两端的数字表示某一端有几个实例。

::: details 鸟类必须有翅膀
![组合关系](/assets/php/design-patterns/uml/08.png)
:::

::: details 男人必须有个大头还必须有个小头才能算完整
![组合关系2](/assets/php/design-patterns/uml/07.png)
:::

## 聚合关系

表示一种弱的拥有关系，即 has-a 关系，体现的是 A 对象可以包含 B 对象，但 B 对象不是 A 对象的一部分（可有可无的那种）。两个对象具有各自的生命周期。

使用 `空心菱形+实线+箭头` 表示，还可以使用连线两端的数字表示某一端有几个实例。

::: details 大雁和雁群是一种聚合关系
大雁都是雁群，但是有时候也会看到孤单的 1 只大雁
![组合关系](/assets/php/design-patterns/uml/10.png)
:::

::: details 人和生活圈是一种聚合关系
大家都是人，是人就要混圈子，人的生命周期和圈子的生命是不一样的，有的人活 100 多岁，有的圈子没多久也会解散，但是圈子解散不影响人的生命。
![组合关系2](/assets/php/design-patterns/uml/09.png)
:::

::: danger 图片来源
图片来源于网络
:::
